<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM62Ax MCU+ SDK: SBL SD LINUX</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM62Ax MCU+ SDK
   &#160;<span id="projectnumber">09.01.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('EXAMPLES_DRIVERS_SBL_SD_LINUX.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">SBL SD LINUX </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md1147">Introduction</a></li>
<li class="level1"><a href="#EXAMPLES_DRIVERS_SBL_SD_LINUX_COMBOS">Supported Combinations</a></li>
<li class="level1"><a href="#autotoc_md1148">Steps to Run the Example</a></li>
<li class="level1"><a href="#autotoc_md1149">Flash SD card</a></li>
<li class="level1"><a href="#autotoc_md1150">See Also</a></li>
<li class="level1"><a href="#autotoc_md1151">Sample Output</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_examples_drivers_sbl_sd_linux"></a> </p><dl class="section note"><dt>Note</dt><dd>SBL SD Linux boots from the boot partition 1 of SD and uses a filesystem boot.</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Care should be taken to ensure that the MCU_R5, DM_R5, C7x appimages and the Linux appimage flashed with correct names.</dd></dl>
<h1><a class="anchor" id="autotoc_md1147"></a>
Introduction</h1>
<p>This is a bootloader example, which shows an example of booting Linux on A53 core and RTOS/NORTOS applications on R5 cores.</p>
<p>The SBL uses two appimages</p><ul>
<li>A Linux appimage containing the <b>Linux binaries (ATF, OPTEE, A53 SPL)</b>.</li>
<li>A muticore appimage containing the <b>RTOS/NORTOS applications for MCU_R5, DM_R5 and C7x cores</b>.</li>
</ul>
<p>The bootloader does SOC initializations and parses the multicore appimage present in boot partition of sd card, splits it into RPRCs for each core applicable. Each core is then initialized, RPRC image is loaded, entry points are set and the core is released from reset.</p>
<p>For booting Linux, SBL parses the Linux appimage present as linux_a53_image in boot partition of sd card, splits it into individual linux binaries (ATF, OPTEE, SPL). SBL loads the Linux binaries, entry point is set to the start address of ATF and A53 core is released from reset.</p>
<h1><a class="anchor" id="EXAMPLES_DRIVERS_SBL_SD_LINUX_COMBOS"></a>
Supported Combinations</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter  </th><th class="markdownTableHeadNone">Value   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CPU + OS  </td><td class="markdownTableBodyNone">r5fss0-0 nortos   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Toolchain  </td><td class="markdownTableBodyNone">ti-arm-clang   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Boards  </td><td class="markdownTableBodyNone">am62ax-sk   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Example folder  </td><td class="markdownTableBodyNone">examples/drivers/boot/sbl_sd   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md1148"></a>
Steps to Run the Example</h1>
<p>Since this is a bootloader, the example will be run every time you boot an application using this example. It is run from an SD card unlike other examples which are usually loaded with CCS. Nevertheless, you can build this example like you do for the others using makefile or build it via CCS by importing as a project.</p>
<ul>
<li><b>When using CCS projects to build</b>, import the CCS project for the required combination and build it using the CCS project menu (see <a class="el" href="CCS_PROJECTS_PAGE.html">Using SDK with CCS Projects</a>).</li>
<li><b>When using makefiles to build</b>, note the required combination and build using make command (see <a class="el" href="MAKEFILE_BUILD_PAGE.html">Using SDK with Makefiles</a>)</li>
<li>Refer to the page <a class="el" href="TOOLS_FLASH.html#BASIC_STEPS_TO_FLASH_FILES">Basic steps to flash files</a> to flash this bootloader along with the application to boot.</li>
</ul>
<h1><a class="anchor" id="autotoc_md1149"></a>
Flash SD card</h1>
<p>Copy sbl_sd_linux.tiimage to boot partition of the SD card as tiboot3.bin. For booting A53 with Linux and running applications on other cores (MCU R5F, DM R5F, C7x) the appimages should be copied to SD card with correct file names.</p>
<p>File names for respective applications</p>
<ul>
<li>Linux APP image <b>linux_a53_image</b></li>
<li>R5 APP image <b>dm_r5_image</b></li>
<li>MCU R5 APP image <b>mcu_r5_image</b></li>
<li>C7X image <b>c7x_image</b></li>
</ul>
<dl class="section note"><dt>Note</dt><dd>All the images should be present in boot partition of SD card.</dd></dl>
<h1><a class="anchor" id="autotoc_md1150"></a>
See Also</h1>
<p><a class="el" href="DRIVERS_BOOTLOADER_PAGE.html">BOOTLOADER</a></p>
<h1><a class="anchor" id="autotoc_md1151"></a>
Sample Output</h1>
<div class="fragment"><div class="line">DMSC Firmware Version 9.0.5--v09.00.05 (Kool Koala)</div>
<div class="line">DMSC Firmware revision 0x9</div>
<div class="line">DMSC ABI revision 3.1</div>
<div class="line"> </div>
<div class="line">[BOOTLOADER_PROFILE] Boot Media       : SD Card</div>
<div class="line">[BOOTLOADER_PROFILE] Boot Image Size  : 198 KB</div>
<div class="line">[BOOTLOADER_PROFILE] Cores present    :</div>
<div class="line">mcu-r5f0-0</div>
<div class="line">r5f0-0</div>
<div class="line">a530-0</div>
<div class="line">[BOOTLOADER PROFILE] System_init                      :      38563us</div>
<div class="line">[BOOTLOADER PROFILE] Drivers_open                     :     125747us</div>
<div class="line">[BOOTLOADER PROFILE] Board_driversOpen                :          0us</div>
<div class="line">[BOOTLOADER PROFILE] Sciclient Get Version            :       9814us</div>
<div class="line">[BOOTLOADER PROFILE] App_loadImages(CSL_CORE_ID_R5FSS0_0) :     150395us</div>
<div class="line">[BOOTLOADER PROFILE] App_loadLinuxImages              :     145879us</div>
<div class="line">[BOOTLOADER_PROFILE] SBL Total Time Taken             :     470400us</div>
<div class="line"> </div>
<div class="line">Image loading done, switching to application ...</div>
<div class="line">Starting linux and RTOS/Baremetal applications</div>
<div class="line">NOTICE:  BL31: v2.8(release):v2.8-226-g2fcd408bb3-dirty</div>
<div class="line">NOTICE:  BL31: Built : 00:42:57, Jan 13 2023</div>
<div class="line"> </div>
<div class="line">U-Boot SPL 2023.04-g24098ea90d (Jul 06 2023 - 12:59:40 +0000)</div>
<div class="line">SYSFW ABI: 3.1 (firmware rev 0x0009 &#39;9.0.5--v09.00.05 (Kool Koala)&#39;)</div>
<div class="line">am62a_init: board_init_f done</div>
<div class="line">am62a_init: spl_boot_device: devstat = 0x243 bootmedia = 0x8 bootindex = 0</div>
<div class="line">Trying to boot from MMC2</div>
<div class="line">am62a_init: spl_boot_device: devstat = 0x243 bootmedia = 0x8 bootindex = 0</div>
<div class="line">Authentication passed</div>
<div class="line">am62a_init: spl_boot_device: devstat = 0x243 bootmedia = 0x8 bootindex = 0</div>
<div class="line">Authentication passed</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">U-Boot 2023.04-g756ba776d4 (Jul 13 2023 - 05:36:12 +0000)</div>
<div class="line"> </div>
<div class="line">SoC:   AM62AX SR1.0 HS-FS</div>
<div class="line">Model: Texas Instruments AM62A7 SK</div>
<div class="line">DRAM:  2 GiB (effective 4 GiB)</div>
<div class="line">Core:  57 devices, 27 uclasses, devicetree: separate</div>
<div class="line">MMC:   mmc@fa10000: 0, mmc@fa00000: 1</div>
<div class="line">Loading Environment from nowhere... OK</div>
<div class="line">In:    serial@2800000</div>
<div class="line">Out:   serial@2800000</div>
<div class="line">Err:   serial@2800000</div>
<div class="line">Net:   eth0: ethernet@8000000port@1</div>
<div class="line">Hit any key to stop autoboot:  0</div>
<div class="line">=&gt;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">.</div>
<div class="line">.</div>
<div class="line">.</div>
<div class="line">.</div>
<div class="line">.</div>
<div class="line">.</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">_____                    _____           _         _</div>
<div class="line">|  _  |___ ___ ___ ___   |  _  |___ ___  |_|___ ___| |_</div>
<div class="line">|     |  _| .&#39;| . | . |  |   __|  _| . | | | -_|  _|  _|</div>
<div class="line">|__|__|_| |__,|_  |___|  |__|  |_| |___|_| |___|___|_|</div>
<div class="line">            |___|                    |___|</div>
<div class="line"> </div>
<div class="line">Arago Project am62axx-evm -</div>
<div class="line"> </div>
<div class="line">Arago 2023.04 am62axx-evm -</div>
<div class="line"> </div>
<div class="line">am62axx-evm login:</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
